---
output: github_document
---

```{r knitr.opts, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "img/README-"
)
```

# `nihexporter`

[![Travis-CI Build Status](https://travis-ci.org/jayhesselberth/nihexporter.png?branch=master)](https://travis-ci.org/jayhesselberth/nihexporter) [![CRAN status](https://www.r-pkg.org/badges/version/nihexporter)](https://www.r-pkg.org/badges/version/nihexporter)

The `nihexporter` R package provides a minimal set of data from the [NIH EXPORTER](http://exporter.nih.gov/default.aspx) database, which contains information on NIH biomedical research funding from 1985-2016.

To keep the package lightweight, many details are omitted but can be easily retrieved from [NIH RePORTER](https://projectreporter.nih.gov/).

### Installation

Install the package from github with:
  
```r
# install.packages('devtools')
devtools::install_github("jayhesselberth/nihexporter")
```

**Note**: this is a large data package (>40 Mb), so [it will not be submitted to CRAN](http://thecoatlessprofessor.com/programming/size-and-limitations-of-packages-on-cran/).

### Tables

* `projects`: provides data on funded projects by NIH.

* `project_pis`: links project numbers (`project.num`) to principal investigator IDs (`pi.id`).

* `project_orgs`: links DUNS numbers (`org.duns`) from `projects` table to information on specific organizations .

* `publinks`: links Pubmed IDs (`pmid`) to project numbers (`project.num`).

* `publications`: provides information for individual publications, including their [Relative Citation Ratio](https://icite.od.nih.gov) values (`rcr`). 

* `patents`: links project IDs (`project.num`) to `patent.id`.

* `clinical_studies`: links project IDs to associated [clinical trials](https://clinicaltrials.gov/).

* `project_io`: pre-computed `n.pubs`, `n.patents` and `project.cost` for each `project.num`.

### Functions

* `rcr()` retrieves [Relative Citation Ratios](https://icite.od.nih.gov/) and associated information for PubMed IDs.

### Variables

* `nih.institutes`: 27 NIH institutes in two-letter format 

### Example: Fiscal summaries

One can use the `nihexporter` package to find the top-ten all-time most expensive projects.

```{r expensive_projects, warning=FALSE, message=FALSE}
library(nihexporter)
library(dplyr)

expensive_projects <- project_io %>%
  arrange(desc(total.cost)) %>%
  head(10) %>%
  left_join(projects, by = 'project.num') %>%
  select(project.num, institute, total.cost) %>% 
  unique() %>%
  mutate(cost.billions = total.cost / 1e9)

expensive_projects
```

The most expensive project (`ZIHLM200888`) funds the National Library of Medicine's intramural program, including [PubMed](http://pubmed.com) and the [NCBI](https://www.ncbi.nlm.nih.gov/), which provides BLAST, GenBank, RefSeq and dbGAP.

### Resources

- [`nihexporter` pre-print on bioRxiv](http://biorxiv.org/content/early/2015/12/02/033456)

- [RePORTER / EXPORTER mailing list archives](https://list.nih.gov/cgi-bin/wa.exe?A0=NIH-REPORT-PUBLIC-L)

